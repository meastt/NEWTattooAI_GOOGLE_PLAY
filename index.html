<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
    <title>InkPreview - Preview Before You Ink</title>
    <meta name="description" content="Transform your tattoo ideas into reality with AI-powered design generation, virtual try-ons, and removal previews." />
    
    <!-- Custom Fonts - Bold Industrial Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              'sans': ['Inter', 'system-ui', 'sans-serif'],
              'display': ['Bebas Neue', 'Oswald', 'system-ui', 'sans-serif'],
              'heading': ['Oswald', 'system-ui', 'sans-serif'],
            },
            colors: {
              // Deep blacks for backgrounds
              'void': {
                950: '#030304',
                900: '#0a0a0c',
                800: '#111115',
                700: '#18181d',
                600: '#1f1f26',
              },
              // Electric cyan - primary neon accent
              'electric': {
                50: '#ecfeff',
                100: '#cffafe',
                200: '#a5f3fc',
                300: '#67e8f9',
                400: '#22d3ee',
                500: '#00d4ff',
                600: '#00b8db',
                700: '#0891b2',
                800: '#0e7490',
                900: '#155e75',
                950: '#083344',
              },
              // Hot magenta - secondary neon accent
              'magenta': {
                50: '#fdf4ff',
                100: '#fae8ff',
                200: '#f5d0fe',
                300: '#f0abfc',
                400: '#e879f9',
                500: '#ff00ff',
                600: '#c026d3',
                700: '#a21caf',
                800: '#86198f',
                900: '#701a75',
                950: '#4a044e',
              },
              // Neutral grays with slight blue tint
              'steel': {
                50: '#f8fafc',
                100: '#f1f5f9',
                200: '#e2e8f0',
                300: '#cbd5e1',
                400: '#94a3b8',
                500: '#64748b',
                600: '#475569',
                700: '#334155',
                800: '#1e293b',
                900: '#0f172a',
                950: '#020617',
              },
              // Keep legacy colors for gradual migration
              'ink': {
                500: '#00d4ff',
                600: '#00b8db',
                950: '#030304',
              },
              'neon': {
                500: '#ff00ff',
                950: '#030304',
              }
            },
            animation: {
              'fade-in': 'fadeIn 0.5s ease-out',
              'slide-up': 'slideUp 0.5s ease-out',
              'scale-in': 'scaleIn 0.3s ease-out',
              'float': 'float 6s ease-in-out infinite',
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'glow': 'glow 2s ease-in-out infinite alternate',
              'flicker': 'flicker 3s ease-in-out infinite',
              'scan': 'scan 2s linear infinite',
              'border-flow': 'borderFlow 3s linear infinite',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              },
              slideUp: {
                '0%': { opacity: '0', transform: 'translateY(30px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              },
              scaleIn: {
                '0%': { opacity: '0', transform: 'scale(0.95)' },
                '100%': { opacity: '1', transform: 'scale(1)' },
              },
              float: {
                '0%, 100%': { transform: 'translateY(0px)' },
                '50%': { transform: 'translateY(-10px)' },
              },
              glow: {
                '0%': { boxShadow: '0 0 20px rgba(0, 212, 255, 0.3), 0 0 40px rgba(0, 212, 255, 0.1)' },
                '100%': { boxShadow: '0 0 30px rgba(0, 212, 255, 0.5), 0 0 60px rgba(0, 212, 255, 0.2)' },
              },
              flicker: {
                '0%, 100%': { opacity: '1' },
                '50%': { opacity: '0.8' },
                '75%': { opacity: '0.9' },
              },
              scan: {
                '0%': { transform: 'translateY(-100%)' },
                '100%': { transform: 'translateY(100%)' },
              },
              borderFlow: {
                '0%': { backgroundPosition: '0% 50%' },
                '50%': { backgroundPosition: '100% 50%' },
                '100%': { backgroundPosition: '0% 50%' },
              },
            },
            backdropBlur: {
              xs: '2px',
            },
            boxShadow: {
              'neon-cyan': '0 0 20px rgba(0, 212, 255, 0.4), 0 0 40px rgba(0, 212, 255, 0.2)',
              'neon-magenta': '0 0 20px rgba(255, 0, 255, 0.4), 0 0 40px rgba(255, 0, 255, 0.2)',
              'neon-dual': '0 0 20px rgba(0, 212, 255, 0.3), 0 0 40px rgba(255, 0, 255, 0.2)',
              'inner-glow': 'inset 0 0 20px rgba(0, 212, 255, 0.1)',
            },
          }
        }
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
      /* Safe area utilities for mobile devices */
      .safe-top {
        padding-top: env(safe-area-inset-top, 0px);
      }

      .safe-bottom {
        padding-bottom: env(safe-area-inset-bottom, 0px);
      }

      .safe-left {
        padding-left: env(safe-area-inset-left, 0px);
      }

      .safe-right {
        padding-right: env(safe-area-inset-right, 0px);
      }

      /* Ensure the app respects safe areas */
      .app-container {
        padding-top: env(safe-area-inset-top, 0px);
        padding-bottom: env(safe-area-inset-bottom, 0px);
        padding-left: env(safe-area-inset-left, 0px);
        padding-right: env(safe-area-inset-right, 0px);
      }

      /* Header specific safe area handling */
      .header-safe {
        padding-top: env(safe-area-inset-top, 0px) !important;
      }

      /* Bottom navigation safe area */
      .bottom-nav-safe {
        padding-bottom: env(safe-area-inset-bottom, 0px) !important;
      }

      /* Force safe area handling */
      body {
        padding-top: env(safe-area-inset-top, 0px) !important;
        padding-bottom: env(safe-area-inset-bottom, 0px) !important;
      }

      /* Override any Capacitor safe area handling */
      .capacitor-app {
        padding-top: env(safe-area-inset-top, 0px) !important;
      }

      /* iOS-specific nav background fixes - dark mode only */
      html.dark nav.fixed.bottom-0,
      body.dark nav.fixed.bottom-0,
      div.dark nav.fixed.bottom-0 {
        background-color: rgba(3, 3, 4, 0.98) !important;
        background: rgba(3, 3, 4, 0.98) !important;
      }

      html.dark nav.fixed.bottom-0 > div,
      body.dark nav.fixed.bottom-0 > div,
      div.dark nav.fixed.bottom-0 > div {
        background-color: rgba(3, 3, 4, 0.98) !important;
        background: rgba(3, 3, 4, 0.98) !important;
      }

      /* Dark mode specific nav styling */
      .dark nav[class*="bottom-0"] {
        background-color: rgba(3, 3, 4, 0.98) !important;
        background: rgba(3, 3, 4, 0.98) !important;
      }

      .dark nav[class*="bottom-0"] > div:first-child {
        background-color: rgba(3, 3, 4, 0.98) !important;
        background: rgba(3, 3, 4, 0.98) !important;
      }

      /* Neon glow utilities */
      .neon-text-cyan {
        text-shadow: 0 0 10px rgba(0, 212, 255, 0.8), 0 0 20px rgba(0, 212, 255, 0.5), 0 0 30px rgba(0, 212, 255, 0.3);
      }

      .neon-text-magenta {
        text-shadow: 0 0 10px rgba(255, 0, 255, 0.8), 0 0 20px rgba(255, 0, 255, 0.5), 0 0 30px rgba(255, 0, 255, 0.3);
      }

      .neon-border {
        box-shadow: 0 0 10px rgba(0, 212, 255, 0.4), inset 0 0 10px rgba(0, 212, 255, 0.1);
      }

      .neon-border-magenta {
        box-shadow: 0 0 10px rgba(255, 0, 255, 0.4), inset 0 0 10px rgba(255, 0, 255, 0.1);
      }

      /* Gradient border animation */
      .gradient-border {
        position: relative;
      }

      .gradient-border::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: inherit;
        padding: 1px;
        background: linear-gradient(135deg, #00d4ff, #ff00ff, #00d4ff);
        background-size: 200% 200%;
        animation: borderFlow 3s linear infinite;
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
      }

      /* iOS specific safe area fixes */
      @supports (padding: max(0px)) {
        .header-fixed {
          padding-top: max(env(safe-area-inset-top, 0px), 20px);
        }
        
        .bottom-nav-fixed {
          padding-bottom: max(env(safe-area-inset-bottom, 0px), 20px);
        }
      }

      /* Ensure proper positioning on mobile */
      @media (max-width: 768px) {
        header[class*="fixed"] {
          position: fixed !important;
          top: 0px !important;
          left: 0 !important;
          right: 0 !important;
          width: 100% !important;
          transform: translateZ(0) !important;
          min-height: 72px !important;
          padding-top: calc(env(safe-area-inset-top, 0px) + 16px) !important;
          padding-bottom: 8px !important;
        }
        
        nav[class*="fixed"] {
          position: fixed !important;
          bottom: 0px !important;
          left: 0 !important;
          right: 0 !important;
          width: 100% !important;
          transform: translateZ(0) !important;
          height: calc(56px + env(safe-area-inset-bottom, 0px) + 48px) !important;
          padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 48px) !important;
        }
      }

      /* Prevent horizontal scroll and layout shifts */
      * {
        box-sizing: border-box;
      }
      
      html, body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
      }
      
      /* Ensure fixed elements stay fixed */
      header, nav {
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }

      /* Prevent any layout shifts that could break fixed positioning */
      header[class*="fixed"] {
        position: fixed !important;
        top: 0px !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        z-index: 50 !important;
        transform: translateZ(0) !important;
      }

      nav[class*="fixed"] {
        position: fixed !important;
        bottom: 0px !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        z-index: 9999 !important;
        transform: translateZ(0) !important;
      }

      /* Prevent any scroll-based positioning changes */
      body {
        position: relative !important;
        overflow-x: hidden !important;
      }

      /* Ensure no other elements can interfere with fixed positioning */
      .fixed {
        position: fixed !important;
      }

      /* Force header and nav to stay fixed even during content changes */
      header, nav {
        position: fixed !important;
        transform: translateZ(0) !important;
        will-change: transform !important;
      }

      /* Prevent any scroll-based repositioning */
      html {
        scroll-behavior: auto !important;
      }

      /* Ensure no JavaScript can override fixed positioning */
      header[style*="position"] {
        position: fixed !important;
      }

      nav[style*="position"] {
        position: fixed !important;
      }

      /* Force header and nav to stay fixed with maximum specificity */
      html body header {
        position: fixed !important;
        top: 0px !important;
        left: 0px !important;
        right: 0px !important;
        width: 100% !important;
        z-index: 50 !important;
        transform: translateZ(0) !important;
      }

      html body nav {
        position: fixed !important;
        bottom: 0px !important;
        left: 0px !important;
        right: 0px !important;
        width: 100% !important;
        z-index: 9999 !important;
        transform: translateZ(0) !important;
        isolation: isolate !important;
        contain: layout style paint !important;
      }

      /* Extra aggressive footer fixing */
      nav[class*="fixed"],
      nav[class*="bottom-0"],
      nav[style*="position"],
      nav[style*="bottom"] {
        position: fixed !important;
        bottom: 0px !important;
        left: 0px !important;
        right: 0px !important;
        width: 100% !important;
        z-index: 9999 !important;
        transform: translateZ(0) !important;
        isolation: isolate !important;
        contain: layout style paint !important;
      }

      /* Prevent any scroll-based changes */
      html, body {
        position: relative !important;
        overflow-x: hidden !important;
        max-width: 100vw !important;
      }

      /* Virtual keyboard handling */
      @media screen and (max-width: 768px) {
        /* Prevent viewport changes from affecting fixed positioning */
        html {
          height: 100% !important;
          height: 100vh !important;
          height: 100dvh !important; /* Dynamic viewport height */
        }
        
        body {
          height: 100% !important;
          height: 100vh !important;
          height: 100dvh !important;
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          overflow-y: auto !important;
          overflow-x: hidden !important;
          -webkit-overflow-scrolling: touch !important;
        }
        
        /* Ensure header stays fixed during keyboard events */
        header {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          width: 100% !important;
          z-index: 9999 !important;
          transform: translateZ(0) !important;
          will-change: transform !important;
          backface-visibility: hidden !important;
          -webkit-backface-visibility: hidden !important;
        }
        
        /* Ensure bottom nav stays fixed during keyboard events */
        nav {
          position: fixed !important;
          bottom: 0 !important;
          left: 0 !important;
          right: 0 !important;
          width: 100% !important;
          z-index: 9999 !important;
          transform: translateZ(0) !important;
          will-change: transform !important;
          backface-visibility: hidden !important;
          -webkit-backface-visibility: hidden !important;
        }
        
        /* Prevent input focus from affecting layout */
        input, textarea, select {
          transform: translateZ(0) !important;
        }
      }
    </style>
  <script>
    // Force header and footer to stay fixed
    function enforceFixedPositioning() {
      const header = document.querySelector('header');
      const nav = document.querySelector('nav');
      
      if (header) {
        header.style.setProperty('position', 'fixed', 'important');
        header.style.setProperty('top', '0px', 'important');
        header.style.setProperty('left', '0px', 'important');
        header.style.setProperty('right', '0px', 'important');
        header.style.setProperty('width', '100%', 'important');
        header.style.setProperty('z-index', '50', 'important');
        header.style.setProperty('transform', 'translateZ(0)', 'important');
      }
      
      if (nav) {
        nav.style.setProperty('position', 'fixed', 'important');
        nav.style.setProperty('bottom', '0px', 'important');
        nav.style.setProperty('left', '0px', 'important');
        nav.style.setProperty('right', '0px', 'important');
        nav.style.setProperty('width', '100%', 'important');
        nav.style.setProperty('z-index', '9999', 'important');
        nav.style.setProperty('transform', 'translateZ(0)', 'important');
        nav.style.setProperty('isolation', 'isolate', 'important');
        nav.style.setProperty('contain', 'layout style paint', 'important');
      }
    }
    
    // Run on page load
    document.addEventListener('DOMContentLoaded', enforceFixedPositioning);
    
    // Run after any content changes
    const observer = new MutationObserver(enforceFixedPositioning);
    observer.observe(document.body, { 
      childList: true, 
      subtree: true, 
      attributes: true,
      attributeFilter: ['style', 'class']
    });
    
    // Run more frequently to ensure positioning stays fixed
    setInterval(enforceFixedPositioning, 100); // Run every 100ms instead of 1000ms
    
    // Specifically watch for image loads that might break the footer
    document.addEventListener('load', function(e) {
      if (e.target.tagName === 'IMG') {
        setTimeout(enforceFixedPositioning, 50); // Fix positioning after image loads
        // Also force a reflow to prevent layout shifts
        setTimeout(() => {
          document.body.style.transform = 'translateZ(0)';
          setTimeout(() => {
            document.body.style.transform = '';
          }, 10);
        }, 10);
      }
    }, true);
    
    // Watch for any scroll events that might affect positioning
    let scrollTimeout;
    window.addEventListener('scroll', function() {
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(enforceFixedPositioning, 10); // Fix positioning after scroll
    });

    // Virtual keyboard detection and handling
    let initialViewportHeight = window.innerHeight;
    let isKeyboardOpen = false;
    
    function handleViewportChange() {
      const currentHeight = window.innerHeight;
      const heightDifference = initialViewportHeight - currentHeight;
      
      // If height decreased significantly, keyboard is likely open
      if (heightDifference > 150) {
        if (!isKeyboardOpen) {
          isKeyboardOpen = true;
          console.log('Virtual keyboard opened');
          // Force header and nav to stay fixed
          enforceFixedPositioning();
        }
      } else {
        if (isKeyboardOpen) {
          isKeyboardOpen = false;
          console.log('Virtual keyboard closed');
          // Force header and nav to stay fixed after keyboard closes
          setTimeout(enforceFixedPositioning, 100);
          setTimeout(enforceFixedPositioning, 300);
          setTimeout(enforceFixedPositioning, 500);
        }
      }
    }
    
    // Listen for viewport changes (keyboard events)
    window.addEventListener('resize', handleViewportChange);
    window.addEventListener('orientationchange', function() {
      setTimeout(() => {
        initialViewportHeight = window.innerHeight;
        enforceFixedPositioning();
      }, 500);
    });
    
    // Handle input focus/blur events
    document.addEventListener('focusin', function(e) {
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
        console.log('Input focused');
        setTimeout(enforceFixedPositioning, 100);
      }
    });
    
    document.addEventListener('focusout', function(e) {
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
        console.log('Input blurred');
        setTimeout(enforceFixedPositioning, 100);
        setTimeout(enforceFixedPositioning, 300);
        setTimeout(enforceFixedPositioning, 500);
      }
    });
    
    // Handle visual viewport API if available (more accurate)
    if (window.visualViewport) {
      window.visualViewport.addEventListener('resize', function() {
        console.log('Visual viewport changed');
        setTimeout(enforceFixedPositioning, 50);
        setTimeout(enforceFixedPositioning, 200);
      });
    }
  </script>
  <script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.16.0"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>